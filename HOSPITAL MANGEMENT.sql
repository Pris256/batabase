
--WELCOME TO OUR GROUP WORK

CREATE DATABASE Hospital;
--CREATING THE DOCTOR TABLE
CREATE TABLE DOCTOR (
    DOCTORid VARCHAR(20) PRIMARY KEY,
    DEPT_ID VARCHAR(20),
    DAYS_IN_WEEK VARCHAR(20)NOT NULL
);
--INSERTING VALUES INTO THE DOCTOR TABLE
INSERT INTO DOCTOR VALUES('D001','DEPT1','WED,THUR,SUN'),
    ('D002','DEPT2','MON,THUR'),
    ('D003','DEPT3','WED,FRI,SAT'),
    ('D004','DEPT4','SUN,TUE,MON'),
    ('D005','DEPT5','THUR,SUN')
    ;
    --CREATING THE DEPARTMENT TABLE
CREATE TABLE DEPARTMENT ( 
    DEPT_NAME VARCHAR(20)NOT NULL,
    DEPT_ID VARCHAR(20)PRIMARY KEY,
    DOCTORid VARCHAR(20)  
);
--INSERTING VALUES INTO THE DEPARTMENT TABLE
INSERT INTO department VALUES("EYE","DEPT1","D001"),
    ("SURGERY","DEPT2","D002"),
    ("OPTICS","DEPT3","D003"),
    ("DENTISTRY","DEPT4","D004"),
    ("ANTINENTAL","DEPT5","D005")
    ;
    --CREATING THE PATIENT TABLE
CREATE TABLE PATIENT(
    P_ID VARCHAR(20)PRIMARY KEY,
    PATIENT_NAME VARCHAR(20)NOT NULL,
    ROOM_NUMBER VARCHAR(20),
    GENDER VARCHAR(20)NOT NULL,
    DOCTORid VARCHAR(20),
    DEPT_ID VARCHAR(20),
    DISEASE VARCHAR(200)
);
-- INSERTING VALUES IN THE PATIENT TABLE
INSERT INTO PATIENT VALUES
    ("P001","RACHEL","R001","FEMALE","D001","DEPT1","FLU"),
    ("P002","RACHEN","R002","MALE","D002","DEPT2","COUGH"),
    ("P003","CHEN","R003","FEMALE","D003","DEPT3","TB"),
    ("P004","ACHEN","R004","MALE","D004","DEPT4","MALARIA"),
    ("P005","RACH","R005","FEMALE","D005","DEPT5","COUGH")
    ;

--CREATING THE INPATIENT TABLE
CREATE TABLE INPATIENT(
    P_ID VARCHAR(20),
    ROOM_NUMBER VARCHAR(20),
    P_TYPE INT NOT NULL
);
--INSERTING VALUES INTO THE INPATIENT TABLE
INSERT INTO INPATIENT VALUES("P001","R001","VIP"),
    ("P002","R002","ORD"),
    ("P003","R003","ORD"),
    ("P004","R004","VIP"),
    ("P005","R005","VIP")
    ;
    --CREATING THE ROOM TABLE
CREATE TABLE ROOM(
    ROOM_NUMBER VARCHAR(20)PRIMARY KEY,
    ROOM_TYPE VARCHAR(20)NOT NULL,
    P_ID VARCHAR(20)
    
);
-- INSERTING VALUES INTO THE ROOM TABLE
    INSERT INTO ROOM VALUES("R001","ORDINARY","P001"),
    ("R002","EXECUTIVE","P002"),
    ("R003","ORDINARY","P003"),
    ("R004","EXECUTIVE","P004"),
    ("R005","ORDINARY","P005")
    ;
--CREATING THE BILL TABLE
CREATE TABLE BILL(
    BILL_No VARCHAR(20)PRIMARY KEY,
    P_ID VARCHAR(20),
    MEDICINE_CHARGE INT NOT NULL,
    ROOM_CHARGE INT ,
    LAB_CHARGE INT NOT NULL,
    NURSING_CHARGE INT ,
    DAYS_SPENT INT NOT NULL
);
   --INSERTING VALUES IN THE BILL TABLE
    INSERT INTO bill VALUES ("B001","P001",120000,20000,20000,15000,12),
    ("B002","P002",6500,69000,78500,18000,16),
    ("B003","P003",10000,5400,87000,54300,10),
    ("B004","P004",78900,58000,7900,34000,8),
    ("B005","P005",67900,36000,5400,49000,5)
    ;
    --CREATING THE LAB REPORTS TABLE
CREATE TABLE LAB_REPORTS (
    LAB_No VARCHAR(20)PRIMARY KEY,
    P_ID VARCHAR(20),
    DOCTORid VARCHAR(20),
    DATE_OF_REPORT VARCHAR(20)NOT NULL
);
--INSERTING INTO LAB REPORTS TABLE
INSERT INTO lab_reports 
VALUES
    ("LN01","P001","D001","2022-10-20"),
    ("LN02","P002","D002","2022-10-21"),
    ("LN03","P003","D003","2022-10-21"),
    ("LN04","P004","D004","2022-10-21"),
    ("LN05","P005","D005","2022-10-22")
    ;
    --INSERTING IN FOREIGN KEYS IN THE VARIOUS TABLES
ALTER TABLE DOCTOR ADD FOREIGN KEY(DEPT_ID)REFERENCES DEPARTMENT(DEPT_ID);
ALTER TABLE DEPARTMENT ADD FOREIGN KEY(DOCTORid)REFERENCES DOCTOR(DOCTORid);
ALTER TABLE ROOM ADD FOREIGN KEY(P_ID)REFERENCES PATIENT(P_ID);

ALTER TABLE INPATIENT ADD FOREIGN KEY(ROOM_NUMBER)REFERENCES ROOM(ROOM_NUMBER);
ALTER TABLE INPATIENT ADD FOREIGN KEY(P_ID)REFERENCES PATIENT(P_ID);
ALTER TABLE PATIENT ADD FOREIGN KEY(DOCTORid)REFERENCES DOCTOR(DOCTORid);

ALTER TABLE PATIENT ADD FOREIGN KEY(DEPT_ID)REFERENCES DEPARTMENT(DEPT_ID);

ALTER TABLE lab_reports ADD FOREIGN KEY(P_ID)REFERENCES PATIENT(P_ID);
ALTER TABLE lab_reports ADD FOREIGN KEY(DOCTORid)REFERENCES PATIENT(DOCTORid);

ALTER TABLE BILL ADD FOREIGN KEY(P_ID)REFERENCES patient(P_ID);





-- ROMAN ii OF THE WORK SINGLE TABLE QUERIES.
SELECT PATIENT_NAME,P_ID,DISEASE FROM PATIENT WHERE GENDER ='FEMALE';
SELECT DOCTORid FROM doctor WHERE DAYS_IN_WEEK = 'MON,THUR';
SELECT P_ID,ROOM_NUMBER FROM INPATIENT WHERE P_TYPE='VIP';
SELECT P_ID,BILL_No,ROOM_CHARGE,NURSING_CHARGE FROM bill WHERE DAYS_SPENT >='5';
SELECT P_ID,ROOM_NUMBER FROM ROOM WHERE ROOM_TYPE='ORDINARY';
SELECT LAB_No,DOCTORid,P_ID FROM lab_reports WHERE DATE_OF_REPORT='2022-10-21';
SELECT DEPT_NAME,DOCTORid FROM department WHERE DEPT_ID >='1'; 

--MULTIPLE TABLE QUERIES

    SELECT DEPARTMENT.DEPT_NAME,doctor.DOCTORid FROM DEPARTMENT 
    JOIN DOCTOR ON DEPARTMENT.DOCTORid = DOCTOR.DOCTORid;

    SELECT PATIENT.P_ID,INPATIENT.P_TYPE FROM PATIENT 
    JOIN inpatient ON PATIENT.P_ID = INPATIENT.P_ID ;
    SELECT bill.DAYS_SPENT,LAB_REPORTS.DATE_OF_REPORT FROM bill 
    JOIN lab_reports ON BILL.P_ID = LAB_REPORTS.P_ID;


    -- ROMAN iii changing datatype in a column
    ALTER TABLE inpatient MODIFY P_TYPE CHAR;

    ALTER TABLE patient MODIFY GENDER CHAR;

    -- ROMAN iV EDITING
    UPDATE bill SET MEDICINE_CHARGE='15000', WHERE BILL_No = 'B001';
    UPDATE department SET DEPT_NAME='OPTICS' WHERE DEPT_ID='DEPT4';
    UPDATE doctor SET DAYS_IN_WEEK='MON,SAT,SUN' WHERE DOCTORid='D003';

    -- use of functions 
SELECT UPPER P_TYPE FROM INPATIENTS;
SELECT COUNT P_ID FROM INPATIENT WHERE P_TYPE="VIP";










